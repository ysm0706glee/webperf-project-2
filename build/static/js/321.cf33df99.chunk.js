/*! For license information please see 321.cf33df99.chunk.js.LICENSE.txt */
(self.webpackChunkwebperf_project_2=self.webpackChunkwebperf_project_2||[]).push([[321],{2321:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return V}});var r=1/60*1e3,i="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},a="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(i())}),r)};var o=!0,s=!1,l=!1,u={delta:0,timestamp:0},c=["read","update","preRender","render","postRender"],d=c.reduce((function(e,n){return e[n]=function(e){var n=[],t=[],r=0,i=!1,a=!1,o=new WeakSet,s={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=a?n:t;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===s.indexOf(e)&&(s.push(e),a&&i&&(r=n.length)),e},cancel:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1),o.delete(e)},process:function(l){if(i)a=!0;else{i=!0;var u=[t,n];if(n=u[0],(t=u[1]).length=0,r=n.length)for(var c=0;c<r;c++){var d=n[c];d(l),o.has(d)&&(s.schedule(d),e())}i=!1,a&&(a=!1,s.process(l))}}};return s}((function(){return s=!0})),e}),{}),p=c.reduce((function(e,n){var t=d[n];return e[n]=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s||h(),t.schedule(e,n,r)},e}),{}),y=c.reduce((function(e,n){return e[n]=d[n].cancel,e}),{}),f=(c.reduce((function(e,n){return e[n]=function(){return d[n].process(u)},e}),{}),function(e){return d[e].process(u)}),m=function e(n){s=!1,u.delta=o?r:Math.max(Math.min(n-u.timestamp,40),1),u.timestamp=n,l=!0,c.forEach(f),l=!1,s&&(o=!1,a(e))},h=function(){s=!0,o=!0,l||a(m)},v=p,w=t(2791);var g=(0,w.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),x="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()};function E(e){var n=function(e){var n=(0,w.useRef)(null);return null===n.current&&(n.current=e()),n.current}(x),t=(0,w.useContext)(g).isStatic;(0,w.useEffect)((function(){if(!t){var r=function(t){var r=t.timestamp;e(r-n)};return v.update(r,!0),function(){return y.update(r)}}}),[e])}var _={scene:"styles_scene__qZ0O2",levelBg:"styles_levelBg__14QA8",turret:"styles_turret__8k5aR",barrel:"styles_barrel__U-NVf",status:"styles_status__dhWRL",modal:"styles_modal__13+dM",entity:"styles_entity__391Vy",entityShot:"styles_entityShot__SjEUQ",entityEnemy:"styles_entityEnemy__GwT2Q",entityEnemyRed:"styles_entityEnemyRed__XIXJK",entityEnemyGreen:"styles_entityEnemyGreen__RxbS7",entityEnemyPurple:"styles_entityEnemyPurple__6pdrs",entityEnemyBlue:"styles_entityEnemyBlue__2W7z4"},S=t(2982),M=t(7762),C=60,b=t(885),R=function(){return{x:window.innerWidth/2,y:window.innerHeight+-30}},T=function(e){for(var n=50,t=e?window.innerWidth+C:-60,r=[],i=0;i<4;i++)r.push({x:t,y:n}),t=e?100:window.innerWidth-100,r.push({x:t,y:n}),n+=.1*window.innerHeight,e=!e;return n=window.innerHeight+100,r.push({x:t,y:n}),r},j=t(763),B=t.n(j),O=function(e){var n=20+e/2;return{x:Math.random()*(window.innerWidth-2*n)+n,y:-50}},k=[function(){return B().times(10,(function(){return{variant:"normal",style:"Red",delay:2,position:O(C),speed:.1}}))},function(){return B().times(15,(function(e){return e%5?{variant:"normal",style:"Red",delay:1.5,position:O(C),speed:.1}:{variant:"sine",style:"Purple",delay:2,position:O(300),speed:.06,sineRadius:150,sineSpeed:.1}}))},function(){return[].concat((0,S.Z)(B().times(3,(function(){return{variant:"normal",style:"Red",delay:0,position:O(C),speed:.1}}))),[{variant:"normal",style:"Red",delay:3,position:O(C),speed:.1}],(0,S.Z)(B().times(4,(function(){return{variant:"normal",style:"Red",delay:0,position:O(C),speed:.1}}))),[{variant:"normal",style:"Red",delay:4,position:O(C),speed:.1}],(0,S.Z)(B().times(6,(function(){return{variant:"normal",style:"Red",delay:0,position:O(C),speed:.1}}))))},function(){return(0,S.Z)(B().times(12,(function(){return{variant:"normal",style:"Green",delay:1.5,position:O(C),speed:.18}})))},function(){return(0,S.Z)(B().times(10,(function(){return{variant:"sine",style:"Purple",delay:2,position:O(460),speed:.1,sineRadius:200,sineSpeed:.1}})))},function(){return(0,S.Z)(B().times(50,(function(){return{variant:"snake",style:"Blue",delay:.3,position:O(C),lines:T(!0),speed:.4}})))},function(){return B().times(50,(function(){switch(Math.floor(4*Math.random())){case 0:return{variant:"sine",style:"Purple",delay:1+1*Math.random(),position:O(560),speed:.12,sineRadius:250,sineSpeed:.05+.3*Math.random()};case 1:return{variant:"snake",style:"Blue",delay:.3+1*Math.random(),position:O(C),lines:T(Math.random()>.5),speed:.4};default:return{variant:"normal",style:"Green",delay:1+1*Math.random(),position:O(C),speed:.18}}}))}];function G(e){return k[e-1]?k[e-1]():[]}var A=["hsla(0, 100%, 50%, 0.15)","hsla(40, 100%, 50%, 0.15)","hsla(80, 100%, 50%, 0.15)","hsla(120, 100%, 50%, 0.15)","hsla(200, 100%, 50%, 0.15)","hsla(280, 100%, 50%, 0.15)","hsla(0, 100%, 50%, 0.3)","hsla(0, 100%, 100%, 0.5)","hsla(0, 100%, 50%, 0)"],P=function(){var e=G(1);return{entityContainerEl:null,barrelEl:null,statusEl:null,modalEl:null,levelBgEl:null,barrelAngle:0,entities:[],lastUpdateTime:0,lives:3,level:1,score:0,shotCount:0,enemyCount:e.length,enemySpawns:e,lastSpawnTime:0,modalTime:0,isGameOver:!1}};function Z(e,n){e.entityContainerEl&&(e.entityContainerEl.appendChild(n.el),e.entities.push(n))}function H(e){e.dead=!0,e.el.remove()}function N(e){e.entities.forEach((function(e){H(e)}))}var W=t(1694),L=t.n(W);function U(e){e.isGameOver?function(e){var n=P(),t=n.level,r=n.score,i=n.enemySpawns,a=n.lives,o=n.shotCount,s=n.enemyCount,l=n.isGameOver;Object.assign(e,{level:t,score:r,enemySpawns:i,lives:a,shotCount:o,enemyCount:s,isGameOver:l,modalTime:1})}(e):e.modalTime>0||(e.shotCount++,Z(e,function(e){var n=R(),t=n.x,r=n.y;t+=38*Math.cos(e),r+=38*Math.sin(e);var i={x:.8*window.innerHeight*Math.cos(e),y:.8*window.innerHeight*Math.sin(e)},a=document.createElement("div");return a.className=L()(_.entity,_.entityShot),a.style.left="".concat(t,"px"),a.style.top="".concat(r,"px"),{type:"shot",velocity:i,el:a}}(e.barrelAngle)))}function I(e,n){var t=n-e.lastUpdateTime;e.lastUpdateTime=n,function(e,n){if(e.modalTime>0)return;var t=e.enemySpawns,r=e.lastSpawnTime,i=t[0];i&&n-r>i.delay&&(e.lastSpawnTime=n,t.shift(),Z(e,function(e,n){var t=e.position,r=t.x,i=t.y,a=e.style,o=document.createElement("div");return o.className=L()(_.entity,_.entityEnemy,_["entityEnemy".concat(a)]),o.style.left="".concat(r,"px"),o.style.top="".concat(i,"px"),{type:"enemy",el:o,spawnTime:n,enemySpawn:e}}(i,n)))}(e,n),function(e){e.barrelEl&&(e.barrelEl.style.transform="rotate(".concat(e.barrelAngle+Math.PI/2,"rad)"))}(e),function(e,n,t){e.entities.forEach((function(e){if("shot"===e.type){var r={x:parseFloat(e.el.style.left)+e.velocity.x*t,y:parseFloat(e.el.style.top)+e.velocity.y*t};e.el.style.left="".concat(r.x,"px"),e.el.style.top="".concat(r.y,"px")}else if("enemy"===e.type){var i=e.enemySpawn,a=i.speed,o=i.variant;if("normal"===o||"sine"===o){var s=parseFloat(e.el.style.top)+window.innerHeight*e.enemySpawn.speed*t;e.el.style.top="".concat(s,"px")}if("sine"===o){var l=e.enemySpawn.position.x+Math.sin(n*e.enemySpawn.sineSpeed*window.innerHeight/100)*e.enemySpawn.sineRadius;e.el.style.left="".concat(l,"px")}if("snake"===o){var u=function(e,n,t){for(var r=n*window.innerHeight*t,i=(0,b.Z)(e,2),a=i[0],o=i[1],s=1;s<e.length;s++){var l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));if(r<=l)return{x:a.x+r*(o.x-a.x)/l,y:a.y+r*(o.y-a.y)/l};r-=l,a=o,o=e[s+1]}return e[e.length-1]}(e.enemySpawn.lines,n-e.spawnTime,a);e.el.style.left="".concat(u.x,"px"),e.el.style.top="".concat(u.y,"px")}}}))}(e,n,t),function(e){e.entities.forEach((function(n){if(!n.dead){var t=n.el.getBoundingClientRect();("shot"===n.type?t.top>window.innerHeight||t.bottom<0||t.left>window.innerWidth||t.right<0:t.top>window.innerHeight)?"enemy"===n.type?function(e){if(e.lives--,0===e.lives)e.enemySpawns=[],e.isGameOver=!0,X(e,"<h1>Game Over!</h1><p>Score: ".concat(e.score,"</p><p>Click to play again :)</p>"),Number.MAX_VALUE);else{X(e,"<h1>Whoops!</h1>",2);var n=e.entities.filter((function(e){return"enemy"===e.type&&!e.dead})).map((function(e){return e.enemySpawn}));e.enemySpawns=[].concat((0,S.Z)(n),(0,S.Z)(e.enemySpawns))}N(e)}(e):H(n):e.entities.forEach((function(r){if(!r.dead){var i=r.el.getBoundingClientRect(),a=!(i.left>t.right||i.right<t.left||i.top>t.bottom||i.bottom<t.top),o="shot"===n.type&&"enemy"===r.type;a&&o&&(H(n),H(r),e.score+=50,function(e){if(e.enemySpawns.length||e.entities.some((function(e){return"enemy"===e.type&&!e.dead})))return;var n=e.enemyCount/e.shotCount,t=Math.round(100*n),r=Math.round(1e3*n);X(e,"<h1>Level ".concat(e.level," finished!</h1><p>Shot accuracy: ").concat(t,"%</p><p>Bonus points: ").concat(r,"</p>")),N(e),e.score+=r,e.shotCount=0,e.level++,e.enemySpawns=G(e.level),e.enemyCount=e.enemySpawns.length,e.levelBgEl&&(e.levelBgEl.style.backgroundColor=A[e.level]);0===e.enemySpawns.length&&(X(e,"<h1>Congratulations!</h1><p>You won the game!</p><p>Total score: ".concat(e.score,"</p><p>Click to play again :)</p>"),Number.MAX_VALUE),e.isGameOver=!0)}(e))}}))}})),function(e){var n,t=(0,M.Z)(e.entities);try{for(t.s();!(n=t.n()).done;){var r=n.value;r.dead||[].concat((0,S.Z)(e.entities),[r])}}catch(i){t.e(i)}finally{t.f()}}(e)}(e),function(e,n){e.statusEl&&(e.statusEl.innerText="Level: ".concat(e.level,"\nLives: ").concat(e.lives,"\nScore: ").concat(e.score));e.modalEl&&(e.modalEl.style.opacity=e.modalTime?"1":"0");e.modalTime&&(e.modalTime=Math.max(0,e.modalTime-n))}(e,t)}function X(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;e.modalEl&&(e.modalEl.innerHTML=n),e.modalTime=t}var F=t(184),V=function(){var e=(0,w.useRef)(P());return E((function(n){I(e.current,n/1e3)})),(0,F.jsxs)("div",{className:_.scene,onMouseMove:function(n){!function(e,n,t){var r=R(),i=80*Math.PI/180;e.barrelAngle=Math.min(-Math.PI/2+i,Math.max(-Math.PI/2-i,Math.atan2(t-r.y,n-r.x)))}(e.current,n.clientX,n.clientY)},onClick:function(){U(e.current)},children:[(0,F.jsx)("div",{className:_.levelBg,ref:function(n){return e.current.levelBgEl=n}}),(0,F.jsx)("div",{className:_.turret,children:(0,F.jsx)("div",{className:_.barrel,ref:function(n){return e.current.barrelEl=n}})}),(0,F.jsx)("div",{ref:function(n){return e.current.entityContainerEl=n}}),(0,F.jsx)("div",{className:_.status,ref:function(n){return e.current.statusEl=n}}),(0,F.jsx)("div",{className:_.modal,ref:function(n){return e.current.modalEl=n},children:"Game Over"})]})}},1694:function(e,n){var t;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];if(t){var a=typeof t;if("string"===a||"number"===a)e.push(t);else if(Array.isArray(t)){if(t.length){var o=i.apply(null,t);o&&e.push(o)}}else if("object"===a)if(t.toString===Object.prototype.toString)for(var s in t)r.call(t,s)&&t[s]&&e.push(s);else e.push(t.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(t=function(){return i}.apply(n,[]))||(e.exports=t)}()}}]);
//# sourceMappingURL=321.cf33df99.chunk.js.map